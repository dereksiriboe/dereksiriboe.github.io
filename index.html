<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Derek Siriboe</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="icon" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <style>
    :root{ --fg:#000; --muted:#666; --max:1200px; }
    *{ box-sizing:border-box; margin:0; padding:0 }
    html,body{ background:#fff; color:var(--fg);
      font:16px/1.6 'Helvetica Neue', Arial, system-ui, -apple-system, sans-serif; }

    /* layout */
    .container{ max-width:var(--max); margin:0 auto; padding:40px; min-height:100vh; }
    .header{ margin-bottom:40px; cursor:pointer; }
    .name{ font-size:18px; font-weight:500; }
    .location,.email{ font-size:16px; color:var(--muted); }
    .email a{ color:inherit; text-decoration:none }
    .email a:hover{ text-decoration:underline }

    .nav{ margin-top:24px }
    .nav a{ text-decoration:underline; margin-right:20px; color:var(--fg) }

    .hero-image{ margin:40px 0; text-align:center }
    .hero-image img{ max-width:100%; height:auto; max-height:60vh; object-fit:cover }

    /* sections */
    .section{ display:none }
    .image-grid{ margin-top:40px }
    .image-row{ display:flex; gap:10px; margin-bottom:10px; align-items:flex-start }
    .image-item{ background:#eee; border-radius:4px; overflow:hidden }
    .image-item img{ width:100%; height:100%; object-fit:cover; display:block }

    /* variety sizes */
    .small{ width:80px; height:80px }
    .medium{ width:120px; height:80px }
    .large{ width:160px; height:80px }
    .tall{ width:80px; height:120px }
    .wide{ width:200px; height:80px }

    .spacer{ height:60px }

    /* sticky banner on subpages */
    .banner{ position:sticky; top:0; background:#fff; z-index:2; border-bottom:1px solid #eee }
    .banner .inner{ max-width:var(--max); margin:0 auto; padding:24px 40px }

    /* responsive */
    @media (max-width:768px){
      .container{ padding:22px 16px }
      .banner .inner{ padding:18px 16px }
      .small{ width:60px; height:60px }
      .medium{ width:90px; height:60px }
      .large{ width:120px; height:60px }
      .tall{ width:60px; height:90px }
      .wide{ width:140px; height:60px }
      .spacer{ height:40px }
    }
    @media (max-width:480px){
      .small{ width:50px; height:50px }
      .medium{ width:75px; height:50px }
      .large{ width:100px; height:50px }
      .tall{ width:50px; height:75px }
      .wide{ width:120px; height:50px }
      .spacer{ height:30px }
    }
  </style>
</head>
<body>
  <div class="container" id="home">
    <!-- Home -->
    <div class="main-content" id="main-content">
      <div class="header" data-home>
        <div class="name">Derek Siriboe</div>
        <div class="location">New York, NY</div>
        <div class="email"><a href="mailto:asap@cocoyams.com">asap@cocoyams.com</a></div>
      </div>

      <div class="hero-image">
        <img id="hero-img" alt="Derek Siriboe" style="display:none">
      </div>

      <nav class="nav">
        <a href="#leisure">leisure</a>
        <a href="#project">project</a>
      </nav>
    </div>

    <!-- Leisure -->
    <div class="section" id="leisure-section">
      <header class="banner" data-home>
        <div class="inner">
          <div class="name">Derek Siriboe</div>
          <div class="location">New York, NY</div>
          <div class="email"><a href="mailto:asap@cocoyams.com">asap@cocoyams.com</a></div>
        </div>
      </header>
      <main class="image-grid" id="leisure-grid"></main>
    </div>

    <!-- Project -->
    <div class="section" id="project-section">
      <header class="banner" data-home>
        <div class="inner">
          <div class="name">Derek Siriboe</div>
          <div class="location">New York, NY</div>
          <div class="email"><a href="mailto:asap@cocoyams.com">asap@cocoyams.com</a></div>
        </div>
      </header>
      <main class="image-grid" id="project-grid"></main>
    </div>
  </div>

  <script>
    /* --- Optional hero image auto-detect --- */
    function loadHeroImage(){
      const hero = document.getElementById('hero-img');
      const candidates = [
        'images/hero.jpg','images/hero.jpeg','images/hero.png','images/hero.webp',
        'images/profile.jpg','images/profile.jpeg','images/profile.png'
      ];
      for (const p of candidates){
        const test = new Image();
        test.onload = ()=>{ if (!hero.src){ hero.src=p; hero.style.display='block'; } };
        test.src = p;
      }
    }

    /* --- JSON rows renderer --- */
    const sizeClasses = ['small','medium','large','tall','wide'];

    async function renderRows(jsonPath, mountId){
      const mount = document.getElementById(mountId);
      mount.innerHTML = '<div class="loading" style="color:#999;padding:40px;text-align:center">Loading imagesâ€¦</div>';
      try{
        const data = await (await fetch(jsonPath, {cache:'no-store'})).json();
        mount.innerHTML = '';
        let counter = 0;

        for (const row of data.rows){
          if (row.spacer){
            const s = document.createElement('div');
            s.className = 'spacer';
            s.style.height = (row.spacer + 'px');
            mount.appendChild(s);
            continue;
          }
          const line = document.createElement('div');
          line.className = 'image-row';

          row.forEach((item, i) => {
            const obj = (typeof item === 'string') ? {file:item} : item;
            const cell = document.createElement('div');
            cell.className = `image-item ${sizeClasses[(counter+i)%sizeClasses.length]}`;

            const img = document.createElement('img');
            img.loading = 'lazy';
            img.src = obj.file;
            img.alt = (obj.alt || obj.file.split('/').pop().replace(/\.[^.]+$/,'').replace(/[-_]/g,' '));

            if (obj.href){
              const link = document.createElement('a');
              link.href = obj.href; link.target = '_blank'; link.rel = 'noopener';
              link.appendChild(img); cell.appendChild(link);
            }else{
              cell.appendChild(img);
            }
            line.appendChild(cell);
          });

          mount.appendChild(line);
          counter += row.length || 1;
        }

        if (!mount.children.length){
          mount.innerHTML = '<div style="color:#999;padding:40px;text-align:center">No images found.</div>';
        }
      }catch(err){
        console.error(err);
        mount.innerHTML = '<div style="color:#999;padding:40px;text-align:center">Could not load gallery.</div>';
      }
    }

    /* --- Simple hash router (so Back/Forward works) --- */
    function showHome(){
      document.getElementById('main-content').style.display = 'block';
      document.getElementById('leisure-section').style.display = 'none';
      document.getElementById('project-section').style.display = 'none';
    }
    async function showLeisure(){
      document.getElementById('main-content').style.display = 'none';
      document.getElementById('project-section').style.display = 'none';
      document.getElementById('leisure-section').style.display = 'block';
      await renderRows('data/leisure.json', 'leisure-grid');
    }
    async function showProject(){
      document.getElementById('main-content').style.display = 'none';
      document.getElementById('leisure-section').style.display = 'none';
      document.getElementById('project-section').style.display = 'block';
      await renderRows('data/project.json', 'project-grid');
    }
    function route(){
      const h = location.hash.replace('#','');
      if (h === 'leisure') return showLeisure();
      if (h === 'project') return showProject();
      return showHome();
    }

    /* click banner to return home */
    document.addEventListener('click', (e)=>{
      if (e.target.closest('[data-home]') && document.getElementById('main-content').style.display === 'none'){
        location.hash = '';
      }
    });

    window.addEventListener('hashchange', route);
    document.addEventListener('DOMContentLoaded', () => { loadHeroImage(); route(); });
  </script>
</body>
</html>
